{"content":"{\"cells\":[{\"type\":\"devs.PMStartPoint\",\"size\":{\"width\":40,\"height\":39},\"outPorts\":[\" \"],\"inPorts\":[],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\" \"}}}]},\"position\":{\"x\":-12,\"y\":19},\"angle\":0,\"id\":\"f4afa674-da0a-472d-ae7f-8263491a826c\",\"z\":1,\"attrs\":{\"rect\":{\"fill\":\"#2d3236\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":111,\"y\":2},\"angle\":0,\"id\":\"33c64378-bad9-4d05-bb91-cf2f09a153bd\",\"z\":2,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill\":\"#000\",\"fill-opacity\":0.5},\".label\":{\"text\":\"Describe Volumes\"},\".p_id\":{\"text\":\"61cb1e33d536d50032e0c9a1\"},\"image\":{\"xlink:href\":\"/plugins/AmazonEC2/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"Describe Volumes\"},\"root\":{\"invalid-action\":false}}},{\"type\":\"devs.Link\",\"source\":{\"id\":\"f4afa674-da0a-472d-ae7f-8263491a826c\",\"port\":\"  \"},\"target\":{\"id\":\"33c64378-bad9-4d05-bb91-cf2f09a153bd\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"a7f8ab77-4072-4042-9ecd-c09fc46e2cd9\",\"z\":3,\"attrs\":{\".connection\":{\"stroke-width\":3,\"stroke\":\"#87939A\"},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"devs.MyImageModel\",\"size\":{\"width\":100,\"height\":73},\"inPorts\":[\" \"],\"outPorts\":[\"  \"],\"ports\":{\"groups\":{\"in\":{\"position\":{\"name\":\"left\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"left\",\"args\":{\"y\":10}}}},\"out\":{\"position\":{\"name\":\"right\"},\"attrs\":{\".port-label\":{\"fill\":\"#000\"},\".port-body\":{\"fill\":\"#fff\",\"stroke\":\"#000\",\"r\":10,\"magnet\":true}},\"label\":{\"position\":{\"name\":\"right\",\"args\":{\"y\":10}}}}},\"items\":[{\"id\":\" \",\"group\":\"in\",\"attrs\":{\".port-label\":{\"text\":\" \"}}},{\"id\":\"  \",\"group\":\"out\",\"attrs\":{\".port-label\":{\"text\":\"  \"}}}]},\"position\":{\"x\":301,\"y\":3},\"angle\":0,\"id\":\"11415cf8-e1a8-422a-9445-ef0b12b1910d\",\"z\":4,\"attrs\":{\"rect\":{\"stroke-width\":1,\"fill-opacity\":0.5},\".label\":{\"text\":\"Delete Volumes\"},\".p_id\":{\"text\":\"61cb1e33d536d50032e0c9a1\"},\"image\":{\"xlink:href\":\"/plugins/AmazonEC2/logo.png\",\"ref-y\":50},\"text\":{\"text\":\"Delete Volumes\"},\"root\":{\"invalid-action\":false}}},{\"type\":\"link\",\"source\":{\"id\":\"33c64378-bad9-4d05-bb91-cf2f09a153bd\",\"port\":\"  \"},\"target\":{\"id\":\"11415cf8-e1a8-422a-9445-ef0b12b1910d\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"206570fe-fa62-4477-8a96-3b6c44c99237\",\"z\":5,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}},{\"type\":\"link\",\"source\":{\"id\":\"11415cf8-e1a8-422a-9445-ef0b12b1910d\",\"port\":\"  \"},\"target\":{\"id\":\"11415cf8-e1a8-422a-9445-ef0b12b1910d\",\"port\":\" \"},\"router\":{\"name\":\"manhattan\"},\"connector\":{\"name\":\"rounded\"},\"id\":\"e2eae4f2-5010-4d0a-8898-cc53bba7f306\",\"z\":6,\"attrs\":{\".connection\":{\"stroke\":\"#87939A\",\"stroke-width\":3},\".marker-target\":{\"fill\":\"#87939A\",\"d\":\"M 10 0 L 0 5 L 10 10 z\"}}}]}","code":"var unattachedVolumeIds = [];\n\nfunction getVolumeIds() {\n    const result = actions.describeVolumes.result.describeVolumes.Volumes;\n    for(let i=0; i<result.length; i++) {\n\n        // check if there is any attachment of specified volume\n        if(result[i].Attachments.length == 0) {\n            let unAttachedVolumeId = result[i].VolumeId\n            unattachedVolumeIds.push(unAttachedVolumeId);\n        }\n    }\n}\n\nfunction removeFirstElement() {\n    let e = unattachedVolumeIds.shift();\n}","plugins":[],"processes":[{"id":"62095b1caa92140032b4126a","uuid":"33c64378-bad9-4d05-bb91-cf2f09a153bd","codeId":"describeVolumes","name":"Describe Volumes","description":"","mandatory":true,"coordination":"","condition":"","preRun":"","postRun":"getVolumeIds()","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Describe Volumes","mandatory":true,"method":"","params":[{"value":"","code":null,"id":"61e74456777706003254cdce","_id":"61e74456777706003254cdce","name":"AWS_ACCESS_KEY_ID","required":false,"param":"61e7f91ad536d50032ec70de","type":"string"},{"value":"","code":null,"id":"61e74456777706003254cdcf","_id":"61e74456777706003254cdcf","name":"AWS_SECRET_ACCESS_KEY","required":false,"param":"61e7f91ad536d50032ec70df","type":"string"},{"value":"eu-west-1","code":null,"id":"61e74456777706003254cdd0","_id":"61e74456777706003254cdd0","name":"REGION","required":false,"param":"61e7f91ad536d50032ec70e0","type":"string"},{"value":null,"code":null,"id":"61e74456777706003254cddb","_id":"61e74456777706003254cddb","name":"VOLUME_IDS","required":false,"param":"61e7f91ad536d50032ec70eb","type":"string"},{"value":null,"code":null,"id":"61e74456777706003254cddc","_id":"61e74456777706003254cddc","name":"filters","required":false,"param":"61e7f91ad536d50032ec70ec","type":"string"},{"value":null,"code":null,"id":"61e74456777706003254cddd","_id":"61e74456777706003254cddd","name":"DRYRUN","required":false,"param":"61e7f91ad536d50032ec70ed","type":"string"},{"value":null,"code":null,"id":"61e74456777706003254cdde","_id":"61e74456777706003254cdde","name":"MAX_RESULTS","required":false,"param":"61e7f91ad536d50032ec70ee","type":"string"},{"value":null,"code":null,"id":"61e74456777706003254cddf","_id":"61e74456777706003254cddf","name":"NEXT_TOKEN","required":false,"param":"61e7f91ad536d50032ec70ef","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"AmazonEC2","version":"2.5.8"},"correlateAgents":null,"numProcessParallel":""},{"id":"62095b1caa92140032b41274","uuid":"11415cf8-e1a8-422a-9445-ef0b12b1910d","codeId":"deleteVolume","name":"Delete Volumes","description":"","mandatory":true,"coordination":"each","condition":"unattachedVolumeIds.length > 0","preRun":"","postRun":"removeFirstElement()","filterAgents":"","actionsExecution":"series","actions":[{"retries":null,"timeout":null,"name":"Delete Volumes","mandatory":true,"method":"","params":[{"value":"","code":null,"id":"61e74456777706003254cde1","_id":"61e74456777706003254cde1","name":"AWS_ACCESS_KEY_ID","required":false,"param":"61e7f91ad536d50032ec70f1","type":"string"},{"value":"","code":null,"id":"61e74456777706003254cde2","_id":"61e74456777706003254cde2","name":"AWS_SECRET_ACCESS_KEY","required":false,"param":"61e7f91ad536d50032ec70f2","type":"string"},{"value":"eu-west-1","code":null,"id":"61e74456777706003254cde3","_id":"61e74456777706003254cde3","name":"REGION","required":false,"param":"61e7f91ad536d50032ec70f3","type":"string"},{"value":"unattachedVolumeIds[0]","code":true,"id":"61e74456777706003254cdee","_id":"61e74456777706003254cdee","name":"volumeId","required":false,"param":"61e7f91ad536d50032ec70fe","type":"string"},{"value":null,"code":null,"id":"61e74456777706003254cdef","_id":"61e74456777706003254cdef","name":"dryRun","required":false,"param":"61e7f91ad536d50032ec70ff","type":"string"}],"isEnabled":true,"numParallel":""}],"used_plugin":{"name":"AmazonEC2","version":"2.5.8"},"correlateAgents":null,"numProcessParallel":""}],"configurations":[],"links":[{"sourceId":"f4afa674-da0a-472d-ae7f-8263491a826c","targetId":"33c64378-bad9-4d05-bb91-cf2f09a153bd","uuid":"a7f8ab77-4072-4042-9ecd-c09fc46e2cd9"},{"uuid":"206570fe-fa62-4477-8a96-3b6c44c99237","sourceId":"33c64378-bad9-4d05-bb91-cf2f09a153bd","targetId":"11415cf8-e1a8-422a-9445-ef0b12b1910d"},{"uuid":"e2eae4f2-5010-4d0a-8898-cc53bba7f306","sourceId":"11415cf8-e1a8-422a-9445-ef0b12b1910d","targetId":"11415cf8-e1a8-422a-9445-ef0b12b1910d"}],"used_plugins":[{"name":"AmazonEC2","version":"2.5.8"},{"name":"AmazonEC2","version":"2.5.8"}],"exportedPipeline":{"description":"","queue":null}}